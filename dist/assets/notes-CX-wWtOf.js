import"./modulepreload-polyfill-B5Qt9EMX.js";import{r as h,l as D}from"./auth-Co2TAfQH.js";h();const A="vs_notes_v1",f=document.getElementById("noteForm"),l=document.getElementById("title"),I=document.getElementById("status"),b=document.getElementById("content"),C=document.getElementById("errTitle"),_=document.getElementById("errContent"),i=document.getElementById("successMsg"),p=document.getElementById("notesList"),E=document.getElementById("emptyState"),S=document.getElementById("search"),B=document.getElementById("filterStatus");document.getElementById("logoutBtn").addEventListener("click",D);document.getElementById("clearFormBtn").addEventListener("click",()=>{m(),f.reset(),l.focus()});function m(){C.textContent="",_.textContent="",i.textContent=""}function w(){const t=localStorage.getItem(A);if(!t)return[];try{const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}}function L(t){localStorage.setItem(A,JSON.stringify(t))}function q(){return crypto.randomUUID?crypto.randomUUID():String(Date.now())+Math.random().toString(16).slice(2)}function k(t){try{return new Date(t).toLocaleString()}catch{return t}}function M(t){return t==="Done"?"badge badge--done":t==="In progress"?"badge badge--progress":"badge badge--open"}let s=w();function T(){const t=(S.value||"").trim().toLowerCase(),e=B.value;return s.filter(n=>e==="ALL"?!0:n.status===e).filter(n=>t?(n.title||"").toLowerCase().includes(t)||(n.content||"").toLowerCase().includes(t):!0).sort((n,o)=>(o.updatedAt||o.createdAt).localeCompare(n.updatedAt||n.createdAt))}function u(){const t=T();if(p.innerHTML="",t.length===0){E.style.display="block";return}E.style.display="none";for(const e of t){const n=document.createElement("article");n.className="note",n.innerHTML=`
      <div class="note__top">
        <div>
          <p class="note__title"></p>
          <div class="note__meta">
            <span class="${M(e.status)}">${g(e.status)}</span>
            <span class="note__date">${g(k(e.updatedAt||e.createdAt))}</span>
          </div>
        </div>
      </div>

      <p class="note__content"></p>

      <div class="note__actions">
        <button class="smallbtn" data-action="edit" data-id="${y(e.id)}" type="button">Edit</button>
        <button class="smallbtn smallbtn--danger" data-action="delete" data-id="${y(e.id)}" type="button">Delete</button>
      </div>
    `,n.querySelector(".note__title").textContent=e.title,n.querySelector(".note__content").textContent=e.content,p.appendChild(n)}}function v(t){const e=s.findIndex(n=>n.id===t.id);e===-1?s.push(t):s[e]=t,L(s),u()}function $(t){s=s.filter(e=>e.id!==t),L(s),u()}let d=null;f.addEventListener("submit",t=>{t.preventDefault(),m();const e=l.value.trim(),n=I.value,o=b.value.trim();let r=!0;if(e||(C.textContent="Title is required.",r=!1),o||(_.textContent="Document is required.",r=!1),!r)return;const a=new Date().toISOString();if(d){const c=s.find(N=>N.id===d),x={id:d,title:e,status:n,content:o,createdAt:(c==null?void 0:c.createdAt)||a,updatedAt:a};v(x),d=null,i.textContent="Note updated."}else{const c={id:q(),title:e,status:n,content:o,createdAt:a,updatedAt:a};v(c),i.textContent="Note saved."}f.reset(),l.focus()});p.addEventListener("click",t=>{const e=t.target.closest("button[data-action]");if(!e)return;const n=e.dataset.action,o=e.dataset.id;if(n==="delete"){$(o),m(),i.textContent="Note deleted.";return}if(n==="edit"){const r=s.find(a=>a.id===o);if(!r)return;d=o,l.value=r.title,I.value=r.status,b.value=r.content,m(),i.textContent="Editing mode: update and press Save note.",l.focus()}});S.addEventListener("input",u);B.addEventListener("change",u);u();function g(t){return String(t).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function y(t){return g(t).replaceAll("`","&#096;")}
