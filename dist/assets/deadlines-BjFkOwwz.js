import"./modulepreload-polyfill-B5Qt9EMX.js";import{r as G,l as Z}from"./auth-Co2TAfQH.js";G();document.getElementById("logoutBtn").addEventListener("click",Z);const $="vs_deadlines_v1",B=document.getElementById("deadlineForm"),D=document.getElementById("title"),x=document.getElementById("desc"),u=document.getElementById("date"),v=document.getElementById("time"),S=document.getElementById("priority"),b=document.getElementById("status"),y=document.getElementById("successMsg"),A=document.getElementById("errTitle"),T=document.getElementById("errDesc"),k=document.getElementById("errDate");document.getElementById("clearBtn").addEventListener("click",()=>{c=null,y.textContent="",Y(),B.reset(),u.value||(u.value=I(i)),v.value=v.value||"10:00",D.focus()});const H=document.getElementById("filterPriority"),N=document.getElementById("filterStatus"),K=document.getElementById("monthTitle"),C=document.getElementById("calGrid");document.getElementById("prevMonth").addEventListener("click",()=>q(-1));document.getElementById("nextMonth").addEventListener("click",()=>q(1));const R=document.getElementById("selectedDateText"),L=document.getElementById("timeline"),_=document.getElementById("dayList"),V=document.getElementById("emptyDay"),W=document.getElementById("dayCount");let c=null;function z(){const t=localStorage.getItem($);if(!t)return[];try{const a=JSON.parse(t);return Array.isArray(a)?a:[]}catch{return[]}}function F(t){localStorage.setItem($,JSON.stringify(t))}function Q(){return crypto.randomUUID?crypto.randomUUID():String(Date.now())+Math.random().toString(16).slice(2)}let d=z(),i=new Date;i.setHours(0,0,0,0);let m=new Date(i);m.setDate(1);u.value=I(i);B.addEventListener("submit",t=>{var E;t.preventDefault(),y.textContent="",Y();const a=D.value.trim(),o=x.value.trim(),s=u.value,e=v.value||"10:00",r=S.value,l=b.value;let n=!0;if(a||(A.textContent="Title is required.",n=!1),o||(T.textContent="Beschrijving is required.",n=!1),s||(k.textContent="Datum is required.",n=!1),!n)return;const p=new Date().toISOString(),g={id:c||Q(),title:a,desc:o,date:s,time:e,priority:r,status:l,createdAt:c&&((E=d.find(h=>h.id===c))==null?void 0:E.createdAt)||p,updatedAt:p};if(c){const h=d.findIndex(j=>j.id===c);h!==-1&&(d[h]=g),c=null,y.textContent="Deadline updated."}else d.push(g),y.textContent="Deadline saved.";F(d),i=M(s),m=new Date(i),m.setDate(1),u.value=s,B.reset(),u.value=s,v.value=e,S.value=r,b.value=l,f()});H.addEventListener("change",f);N.addEventListener("change",f);function q(t){m.setMonth(m.getMonth()+t),O()}function O(){const t=m.getFullYear(),a=m.getMonth();K.textContent=`${J(a)} ${t}`,C.innerHTML="";const o=new Date(t,a,1),s=(o.getDay()+6)%7,e=new Date(o);e.setDate(o.getDate()-s);for(let r=0;r<42;r++){const l=new Date(e);l.setDate(e.getDate()+r);const n=I(l),p=l.getMonth()===a,g=document.createElement("div");g.className="daycell"+(p?"":" daycell--muted")+(et(l,i)?" daycell--selected":""),g.dataset.iso=n;const E=X(n);g.innerHTML=`
      <div class="daynum">${l.getDate()}</div>
      <div class="dotrow">${E}</div>
    `,g.addEventListener("click",()=>{i=M(n),u.value=n,f()}),C.appendChild(g)}}function X(t){const a=U().filter(n=>n.date===t),o=a.some(n=>n.priority==="urgent"),s=a.some(n=>n.priority==="high"),e=a.some(n=>n.priority==="neutral"),r=a.some(n=>n.priority==="low");let l="";return o&&(l+='<span class="dot dot--urgent"></span>'),s&&(l+='<span class="dot dot--high"></span>'),e&&(l+='<span class="dot dot--neutral"></span>'),r&&(l+='<span class="dot dot--low"></span>'),l}function tt(){R.textContent=`${nt(i)} ${i.getDate()} ${J(i.getMonth())} ${i.getFullYear()}`;const t=I(i),a=U().filter(e=>e.date===t).sort((e,r)=>(e.time||"00:00").localeCompare(r.time||"00:00"));W.textContent=String(a.length),_.innerHTML="",V.style.display=a.length?"none":"block";for(const e of a){const r=document.createElement("article");r.className="card",r.innerHTML=`
      <div class="card__top">
        <div>
          <p class="card__title"></p>
          <div class="card__meta">
            <span class="badge ${rt(e.priority)}">${at(e.priority)}</span>
            <span class="badge ${st(e.status)}">${lt(e.status)}</span>
            <span class="badge">${P(e.time||"")}</span>
          </div>
        </div>
      </div>
      <p class="card__desc"></p>

      <div class="card__actions">
        <button class="smallbtn" data-action="edit" data-id="${w(e.id)}" type="button">Edit</button>
        <button class="smallbtn smallbtn--danger" data-action="delete" data-id="${w(e.id)}" type="button">Delete</button>
      </div>
    `,r.querySelector(".card__title").textContent=e.title,r.querySelector(".card__desc").textContent=e.desc,_.appendChild(r)}_.querySelectorAll("button[data-action]").forEach(e=>{e.addEventListener("click",()=>{const r=e.dataset.id,l=e.dataset.action;if(l==="delete"){d=d.filter(n=>n.id!==r),F(d),y.textContent="Deadline deleted.",c=null,f();return}if(l==="edit"){const n=d.find(p=>p.id===r);if(!n)return;c=r,D.value=n.title,x.value=n.desc,u.value=n.date,v.value=n.time||"10:00",S.value=n.priority,b.value=n.status,i=M(n.date),m=new Date(i),m.setDate(1),y.textContent="Editing mode: pas aan en klik Save deadline.",f()}})}),L.innerHTML="";const o=[];for(let e=8;e<=20;e++)o.push(`${String(e).padStart(2,"0")}:00`);const s=new Map;for(const e of a)s.has(e.time)||s.set(e.time,[]),s.get(e.time).push(e);for(const e of o){const r=s.get(e)||[],l=r.length?`<span class="slot__pill ${ot(r[0].priority)}">${r.length} item(s)</span>`:'<span class="slot__pill">â€”</span>',n=document.createElement("div");n.className="slot",n.innerHTML=`
      <div class="slot__time">${e}</div>
      ${l}
    `,n.addEventListener("click",()=>{u.value=t,v.value=e,D.focus()}),L.appendChild(n)}}function U(){const t=H.value,a=N.value;return d.filter(o=>t==="ALL"?!0:o.priority===t).filter(o=>a==="ALL"?!0:o.status===a)}function f(){O(),tt()}f();function Y(){A.textContent="",T.textContent="",k.textContent=""}function I(t){const a=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${a}-${o}-${s}`}function M(t){const[a,o,s]=t.split("-").map(Number),e=new Date(a,o-1,s);return e.setHours(0,0,0,0),e}function et(t,a){return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()}function J(t){return["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"][t]||""}function nt(t){return["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"][t.getDay()]||""}function at(t){return t==="urgent"?"Urgent":t==="high"?"High":t==="neutral"?"Neutral":"Low"}function rt(t){return t==="urgent"?"badge--urgent":t==="high"?"badge--high":t==="neutral"?"badge--neutral":"badge--low"}function ot(t){return t==="urgent"?"slot__pill--urgent":t==="high"?"slot__pill--high":t==="neutral"?"slot__pill--neutral":"slot__pill--low"}function lt(t){return t==="done"?"Done":t==="in_progress"?"In progress":"Open"}function st(t){return t==="done"?"badge--done":t==="in_progress"?"badge--prog":"badge--open"}function P(t){return String(t).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function w(t){return P(t).replaceAll("`","&#096;")}
